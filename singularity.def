BootStrap: docker
From: rocker/rstudio:4.3.1

%post
    apt-get update
    apt-get install -y --no-install-recommends \
        zlib1g-dev \
        libglpk-dev
    Rscript \
        -e "install.packages('rmarkdown')" \
        -e "install.packages('markdown')" \
        -e "install.packages('conflicted')" \
        -e "install.packages('DT')" \
        -e "install.packages('Seurat')" \
        -e "install.packages('viridis')" \
        -e "install.packages('BiocManager')" \
        -e "install.packages('remotes')" \
        -e "BiocManager::install('SingleCellExperiment')" \
        -e "BiocManager::install('scuttle')" \
        -e "BiocManager::install('glmGamPoi')" \
        -e "BiocManager::install('biomaRt')" \
        -e "BiocManager::install('limma')" \
        -e "remotes::install_github('chris-mcginnis-ucsf/DoubletFinder')"
    apt-get clean
    rm -Rf \
        /var/lib/apt/lists/ \
        /tmp/downloaded_packages/ \
        /tmp/*.rds
